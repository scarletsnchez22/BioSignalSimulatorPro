<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500" width="900" height="500">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#555"/>
    </marker>
  </defs>
  
  <!-- Fondo -->
  <rect width="900" height="500" fill="#ffffff"/>
  
  <!-- Título -->
  <text x="450" y="28" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333" text-anchor="middle" font-style="italic">
    Resultado de Diseño: Interfaz Nextion
  </text>
  
  <!-- ESP32 Core 0 -->
  <rect x="60" y="70" width="160" height="80" rx="4" fill="#fff" stroke="#555" stroke-width="1.2"/>
  <text x="140" y="95" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">ESP32 Core 0</text>
  <text x="140" y="112" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">NextionDriver</text>
  <text x="140" y="127" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Procesa eventos UI</text>
  <text x="140" y="140" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Envía comandos</text>
  
  <!-- UART -->
  <rect x="280" y="70" width="160" height="80" rx="4" fill="#e8f5e9" stroke="#4caf50" stroke-width="1.5"/>
  <text x="360" y="95" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#2e7d32" text-anchor="middle">UART2</text>
  <text x="360" y="112" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">GPIO16/17</text>
  <text x="360" y="127" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">115200 baudios</text>
  <text x="360" y="140" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Bidireccional</text>
  
  <!-- Nextion -->
  <rect x="500" y="70" width="160" height="80" rx="4" fill="#fff" stroke="#555" stroke-width="1.2"/>
  <text x="580" y="95" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Nextion NX8048T070</text>
  <text x="580" y="112" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">800×480 px, Táctil</text>
  <text x="580" y="127" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Waveform 399×211</text>
  <text x="580" y="140" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Refresh 30 fps</text>
  
  <!-- Arrows -->
  <line x1="220" y1="110" x2="280" y2="110" stroke="#555" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="440" y1="110" x2="500" y2="110" stroke="#555" stroke-width="1" marker-end="url(#arrow)"/>
  
  <!-- Signal Engine -->
  <rect x="60" y="200" width="160" height="70" rx="4" fill="#fff3e0" stroke="#ff9800" stroke-width="1.5"/>
  <text x="140" y="222" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#e65100" text-anchor="middle">Signal Engine</text>
  <text x="140" y="237" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Core 1 - ISR 2000 Hz</text>
  <text x="140" y="252" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">ECG/EMG/PPG</text>
  <text x="140" y="265" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Tiempo real</text>
  
  <!-- Downsampling -->
  <rect x="280" y="200" width="160" height="70" rx="4" fill="#e3f2fd" stroke="#2196f3" stroke-width="1.5"/>
  <text x="360" y="222" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0d47a1" text-anchor="middle">Downsampling</text>
  <text x="360" y="237" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">ECG: 10:1 → 200 Hz</text>
  <text x="360" y="252" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">EMG: 20:1 → 100 Hz</text>
  <text x="360" y="265" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">PPG: 20:1 → 100 Hz</text>
  
  <!-- Waveform Display -->
  <rect x="500" y="200" width="160" height="70" rx="4" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1.5"/>
  <text x="580" y="222" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#4a148c" text-anchor="middle">Visualización</text>
  <text x="580" y="237" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Waveform real-time</text>
  <text x="580" y="252" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Métricas @ 4 Hz</text>
  <text x="580" y="265" font-family="Arial, sans-serif" font-size="9" fill="#555" text-anchor="middle">Controles táctiles</text>
  
  <!-- Vertical arrows -->
  <line x1="140" y1="150" x2="140" y2="200" stroke="#555" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="360" y1="150" x2="360" y2="200" stroke="#555" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="580" y1="150" x2="580" y2="200" stroke="#555" stroke-width="1" marker-end="url(#arrow)"/>
  
  <!-- Horizontal arrows -->
  <line x1="220" y1="235" x2="280" y2="235" stroke="#555" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="440" y1="235" x2="500" y2="235" stroke="#555" stroke-width="1" marker-end="url(#arrow)"/>
  
  <!-- Pages Section -->
  <rect x="60" y="320" width="600" height="150" rx="4" fill="#fafafa" stroke="#555" stroke-width="1.2"/>
  <text x="360" y="342" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Páginas Implementadas (8 páginas)</text>
  
  <!-- Page boxes -->
  <rect x="80" y="360" width="120" height="45" rx="3" fill="#fff" stroke="#ff5722" stroke-width="1.2"/>
  <text x="140" y="377" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#bf360c" text-anchor="middle">Portada + Menú</text>
  <text x="140" y="392" font-family="Arial, sans-serif" font-size="8" fill="#555" text-anchor="middle">Navegación inicial</text>
  
  <rect x="220" y="360" width="120" height="45" rx="3" fill="#fff" stroke="#ff9800" stroke-width="1.2"/>
  <text x="280" y="377" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#e65100" text-anchor="middle">Condiciones</text>
  <text x="280" y="392" font-family="Arial, sans-serif" font-size="8" fill="#555" text-anchor="middle">ECG/EMG/PPG</text>
  
  <rect x="360" y="360" width="120" height="45" rx="3" fill="#fff" stroke="#4caf50" stroke-width="1.2"/>
  <text x="420" y="377" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#1b5e20" text-anchor="middle">Waveforms</text>
  <text x="420" y="392" font-family="Arial, sans-serif" font-size="8" fill="#555" text-anchor="middle">Visualización RT</text>
  
  <rect x="500" y="360" width="120" height="45" rx="3" fill="#fff" stroke="#2196f3" stroke-width="1.2"/>
  <text x="560" y="377" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#0d47a1" text-anchor="middle">Parámetros</text>
  <text x="560" y="392" font-family="Arial, sans-serif" font-size="8" fill="#555" text-anchor="middle">Ajustes sliders</text>
  
  <!-- Details box -->
  <rect x="80" y="420" width="540" height="35" rx="3" fill="#e8f5e9" stroke="#4caf50" stroke-width="1"/>
  <text x="350" y="435" font-family="Arial, sans-serif" font-size="9" fill="#2e7d32" text-anchor="middle">Componentes: Waveform (1-2 canales) • Controles PLAY/PAUSE/STOP • Métricas en tiempo real</text>
  <text x="350" y="448" font-family="Arial, sans-serif" font-size="9" fill="#2e7d32" text-anchor="middle">Actualización: Waveform 30 fps • Métricas 4 Hz • Latencia comandos &lt;20 ms</text>
  
  <!-- Legend -->
  <rect x="700" y="70" width="160" height="180" rx="4" fill="#fafafa" stroke="#555" stroke-width="1"/>
  <text x="780" y="90" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#333" text-anchor="middle">Leyenda</text>
  
  <rect x="715" y="105" width="20" height="15" fill="#e8f5e9" stroke="#4caf50" stroke-width="1"/>
  <text x="745" y="116" font-family="Arial, sans-serif" font-size="8" fill="#555">Comunicación</text>
  
  <rect x="715" y="130" width="20" height="15" fill="#fff3e0" stroke="#ff9800" stroke-width="1"/>
  <text x="745" y="141" font-family="Arial, sans-serif" font-size="8" fill="#555">Generación</text>
  
  <rect x="715" y="155" width="20" height="15" fill="#e3f2fd" stroke="#2196f3" stroke-width="1"/>
  <text x="745" y="166" font-family="Arial, sans-serif" font-size="8" fill="#555">Procesamiento</text>
  
  <rect x="715" y="180" width="20" height="15" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1"/>
  <text x="745" y="191" font-family="Arial, sans-serif" font-size="8" fill="#555">Visualización</text>
  
  <rect x="715" y="205" width="20" height="15" fill="#fff" stroke="#555" stroke-width="1"/>
  <text x="745" y="216" font-family="Arial, sans-serif" font-size="8" fill="#555">Control/Lógica</text>
  
  <text x="780" y="238" font-family="Arial, sans-serif" font-size="7" fill="#777" text-anchor="middle" font-style="italic">Arquitectura dual-core</text>
  <text x="780" y="248" font-family="Arial, sans-serif" font-size="7" fill="#777" text-anchor="middle" font-style="italic">Core 0: UI + Comunicación</text>
  <text x="780" y="258" font-family="Arial, sans-serif" font-size="7" fill="#777" text-anchor="middle" font-style="italic">Core 1: Generación RT</text>
</svg>

<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 650" width="1000" height="650">
  <defs>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>
  
  <!-- Fondo -->
  <rect width="1000" height="650" fill="#fafafa"/>
  
  <!-- Título -->
  <text x="500" y="35" font-family="Segoe UI, Arial" font-size="22" font-weight="bold" fill="#333" text-anchor="middle">
    Análisis Térmico - Distribución de Potencia Disipada
  </text>
  <text x="500" y="58" font-family="Segoe UI, Arial" font-size="13" fill="#666" text-anchor="middle">
    BioSignalSimulator Pro | Potencia total: 3.50 W | Ventilación pasiva | Material: PETG
  </text>
  
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- TABLA DE CONSUMOS - LADO IZQUIERDO -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <g transform="translate(40, 85)">
    <rect x="0" y="0" width="450" height="280" rx="8" fill="white" stroke="#555" stroke-width="1.2" filter="url(#shadow)"/>
    
    <!-- Encabezado tabla -->
    <rect x="0" y="0" width="450" height="32" rx="8" fill="#333"/>
    <rect x="0" y="20" width="450" height="12" fill="#333"/>
    <text x="225" y="22" font-family="Segoe UI, Arial" font-size="13" font-weight="bold" fill="white" text-anchor="middle">
      TABLA DE DISIPACIÓN TÉRMICA
    </text>
    
    <!-- Headers de columnas -->
    <rect x="0" y="32" width="450" height="28" fill="#f5f5f5"/>
    <text x="20" y="51" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#333">Componente</text>
    <text x="180" y="51" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#333">Voltaje</text>
    <text x="240" y="51" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#333">Corriente</text>
    <text x="320" y="51" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#333">Potencia</text>
    <text x="400" y="51" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#333">%</text>
    <line x1="0" y1="60" x2="450" y2="60" stroke="#ddd" stroke-width="1"/>
    
    <!-- Fila 1: Nextion -->
    <rect x="10" y="70" width="12" height="12" rx="2" fill="#e53935"/>
    <text x="30" y="80" font-family="Segoe UI, Arial" font-size="10" fill="#333">Nextion NX8048T070</text>
    <text x="180" y="80" font-family="Consolas, monospace" font-size="10" fill="#555">5.0 V</text>
    <text x="240" y="80" font-family="Consolas, monospace" font-size="10" fill="#555">400 mA</text>
    <text x="320" y="80" font-family="Consolas, monospace" font-size="10" font-weight="bold" fill="#e53935">2.00 W</text>
    <text x="400" y="80" font-family="Consolas, monospace" font-size="10" fill="#555">57.1%</text>
    <line x1="10" y1="90" x2="440" y2="90" stroke="#eee" stroke-width="1"/>
    
    <!-- Fila 2: XL6009 -->
    <rect x="10" y="100" width="12" height="12" rx="2" fill="#FF9800"/>
    <text x="30" y="110" font-family="Segoe UI, Arial" font-size="10" fill="#333">XL6009 Boost (η=85%)</text>
    <text x="180" y="110" font-family="Consolas, monospace" font-size="10" fill="#555">3.7→5V</text>
    <text x="240" y="110" font-family="Consolas, monospace" font-size="10" fill="#555">~180 mA</text>
    <text x="320" y="110" font-family="Consolas, monospace" font-size="10" font-weight="bold" fill="#FF9800">0.67 W</text>
    <text x="400" y="110" font-family="Consolas, monospace" font-size="10" fill="#555">19.1%</text>
    <line x1="10" y1="120" x2="440" y2="120" stroke="#eee" stroke-width="1"/>
    
    <!-- Fila 3: ESP32 -->
    <rect x="10" y="130" width="12" height="12" rx="2" fill="#2196F3"/>
    <text x="30" y="140" font-family="Segoe UI, Arial" font-size="10" fill="#333">ESP32-WROOM-32</text>
    <text x="180" y="140" font-family="Consolas, monospace" font-size="10" fill="#555">3.3 V</text>
    <text x="240" y="140" font-family="Consolas, monospace" font-size="10" fill="#555">150 mA</text>
    <text x="320" y="140" font-family="Consolas, monospace" font-size="10" font-weight="bold" fill="#2196F3">0.50 W</text>
    <text x="400" y="140" font-family="Consolas, monospace" font-size="10" fill="#555">14.3%</text>
    <line x1="10" y1="150" x2="440" y2="150" stroke="#eee" stroke-width="1"/>
    
    <!-- Fila 4: AMS1117 -->
    <rect x="10" y="160" width="12" height="12" rx="2" fill="#9C27B0"/>
    <text x="30" y="170" font-family="Segoe UI, Arial" font-size="10" fill="#333">Regulador AMS1117</text>
    <text x="180" y="170" font-family="Consolas, monospace" font-size="10" fill="#555">5→3.3V</text>
    <text x="240" y="170" font-family="Consolas, monospace" font-size="10" fill="#555">160 mA</text>
    <text x="320" y="170" font-family="Consolas, monospace" font-size="10" font-weight="bold" fill="#9C27B0">0.27 W</text>
    <text x="400" y="170" font-family="Consolas, monospace" font-size="10" fill="#555">7.7%</text>
    <line x1="10" y1="180" x2="440" y2="180" stroke="#eee" stroke-width="1"/>
    
    <!-- Fila 5: LED RGB -->
    <rect x="10" y="190" width="12" height="12" rx="2" fill="#4CAF50"/>
    <text x="30" y="200" font-family="Segoe UI, Arial" font-size="10" fill="#333">LED RGB</text>
    <text x="180" y="200" font-family="Consolas, monospace" font-size="10" fill="#555">3.3 V</text>
    <text x="240" y="200" font-family="Consolas, monospace" font-size="10" fill="#555">15 mA</text>
    <text x="320" y="200" font-family="Consolas, monospace" font-size="10" font-weight="bold" fill="#4CAF50">0.05 W</text>
    <text x="400" y="200" font-family="Consolas, monospace" font-size="10" fill="#555">1.4%</text>
    <line x1="10" y1="210" x2="440" y2="210" stroke="#eee" stroke-width="1"/>
    
    <!-- Fila 6: LM358 + CD4051 -->
    <rect x="10" y="220" width="12" height="12" rx="2" fill="#607D8B"/>
    <text x="30" y="230" font-family="Segoe UI, Arial" font-size="10" fill="#333">LM358 + CD4051</text>
    <text x="180" y="230" font-family="Consolas, monospace" font-size="10" fill="#555">5.0 V</text>
    <text x="240" y="230" font-family="Consolas, monospace" font-size="10" fill="#555">2 mA</text>
    <text x="320" y="230" font-family="Consolas, monospace" font-size="10" font-weight="bold" fill="#607D8B">0.01 W</text>
    <text x="400" y="230" font-family="Consolas, monospace" font-size="10" fill="#555">0.3%</text>
    
    <!-- Línea total -->
    <line x1="0" y1="245" x2="450" y2="245" stroke="#333" stroke-width="2"/>
    <rect x="0" y="245" width="450" height="35" fill="#f0f0f0"/>
    <text x="30" y="268" font-family="Segoe UI, Arial" font-size="12" font-weight="bold" fill="#333">TOTAL DISIPADO</text>
    <text x="320" y="268" font-family="Consolas, monospace" font-size="14" font-weight="bold" fill="#c62828">3.50 W</text>
    <text x="400" y="268" font-family="Consolas, monospace" font-size="12" font-weight="bold" fill="#333">100%</text>
  </g>
  
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- GRÁFICO DE PASTEL - LADO DERECHO -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <g transform="translate(520, 85)">
    <rect x="0" y="0" width="440" height="280" rx="8" fill="white" stroke="#555" stroke-width="1.2" filter="url(#shadow)"/>
    
    <!-- Título del gráfico -->
    <rect x="0" y="0" width="440" height="32" rx="8" fill="#333"/>
    <rect x="0" y="20" width="440" height="12" fill="#333"/>
    <text x="220" y="22" font-family="Segoe UI, Arial" font-size="13" font-weight="bold" fill="white" text-anchor="middle">
      DISTRIBUCIÓN PORCENTUAL
    </text>
    
    <!-- Gráfico de pastel -->
    <g transform="translate(140, 165)">
      <!-- Nextion 57.1% = 205.6° (desde 0°) -->
      <path d="M0,0 L95,0 A95,95 0 1,1 -77.9,-54.5 Z" fill="#e53935"/>
      
      <!-- XL6009 19.1% = 68.8° (desde 205.6°) -->
      <path d="M0,0 L-77.9,-54.5 A95,95 0 0,1 -7.4,-94.7 Z" fill="#FF9800"/>
      
      <!-- ESP32 14.3% = 51.5° (desde 274.4°) -->
      <path d="M0,0 L-7.4,-94.7 A95,95 0 0,1 54.2,-77.9 Z" fill="#2196F3"/>
      
      <!-- AMS1117 7.7% = 27.7° (desde 325.9°) -->
      <path d="M0,0 L54.2,-77.9 A95,95 0 0,1 84.5,-43.6 Z" fill="#9C27B0"/>
      
      <!-- LED + LM358 1.7% = 6.1° (desde 353.6°) -->
      <path d="M0,0 L84.5,-43.6 A95,95 0 0,1 95,0 Z" fill="#4CAF50"/>
      
      <!-- Círculo central -->
      <circle cx="0" cy="0" r="40" fill="white" stroke="#eee" stroke-width="1"/>
      <text x="0" y="-5" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Total</text>
      <text x="0" y="12" font-family="Consolas, monospace" font-size="14" font-weight="bold" fill="#c62828" text-anchor="middle">3.5W</text>
    </g>
    
    <!-- Leyenda del gráfico -->
    <g transform="translate(270, 70)">
      <rect x="0" y="0" width="16" height="16" rx="3" fill="#e53935"/>
      <text x="22" y="13" font-family="Segoe UI, Arial" font-size="10" fill="#333">Nextion (57.1%)</text>
      
      <rect x="0" y="25" width="16" height="16" rx="3" fill="#FF9800"/>
      <text x="22" y="38" font-family="Segoe UI, Arial" font-size="10" fill="#333">XL6009 (19.1%)</text>
      
      <rect x="0" y="50" width="16" height="16" rx="3" fill="#2196F3"/>
      <text x="22" y="63" font-family="Segoe UI, Arial" font-size="10" fill="#333">ESP32 (14.3%)</text>
      
      <rect x="0" y="75" width="16" height="16" rx="3" fill="#9C27B0"/>
      <text x="22" y="88" font-family="Segoe UI, Arial" font-size="10" fill="#333">AMS1117 (7.7%)</text>
      
      <rect x="0" y="100" width="16" height="16" rx="3" fill="#4CAF50"/>
      <text x="22" y="113" font-family="Segoe UI, Arial" font-size="10" fill="#333">Otros (1.7%)</text>
    </g>
    
    <!-- Etiquetas en el pastel -->
    <text x="95" y="180" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="white">57%</text>
    <text x="58" y="95" font-family="Segoe UI, Arial" font-size="9" font-weight="bold" fill="white">19%</text>
    <text x="130" y="80" font-family="Segoe UI, Arial" font-size="9" font-weight="bold" fill="white">14%</text>
  </g>
  
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- ANÁLISIS Y CONCLUSIONES - PARTE INFERIOR -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <g transform="translate(40, 385)">
    <!-- Cálculo térmico -->
    <rect x="0" y="0" width="450" height="120" rx="8" fill="#FFF3E0" stroke="#FF9800" stroke-width="1.5" filter="url(#shadow)"/>
    <rect x="0" y="0" width="450" height="28" rx="8" fill="#FF9800"/>
    <rect x="0" y="16" width="450" height="12" fill="#FF9800"/>
    <text x="225" y="20" font-family="Segoe UI, Arial" font-size="12" font-weight="bold" fill="white" text-anchor="middle">
      CÁLCULO DE INCREMENTO TÉRMICO
    </text>
    
    <text x="20" y="50" font-family="Segoe UI, Arial" font-size="10" fill="#333">Resistencia térmica carcasa con rejillas:</text>
    <text x="280" y="50" font-family="Consolas, monospace" font-size="11" fill="#E65100">Rth = 8 °C/W</text>
    
    <text x="20" y="72" font-family="Segoe UI, Arial" font-size="10" fill="#333">Incremento de temperatura:</text>
    <text x="280" y="72" font-family="Consolas, monospace" font-size="11" fill="#E65100">ΔT = P × Rth = 3.5W × 8°C/W = 28°C</text>
    
    <text x="20" y="94" font-family="Segoe UI, Arial" font-size="10" fill="#333">Temperatura interna máxima (Tamb=30°C):</text>
    <text x="280" y="94" font-family="Consolas, monospace" font-size="11" font-weight="bold" fill="#E65100">Tmax = 30°C + 28°C = 58°C</text>
    
    <text x="20" y="112" font-family="Segoe UI, Arial" font-size="9" fill="#666">Margen vs Tg PETG (80°C): 22°C de seguridad ✓</text>
  </g>
  
  <!-- Conclusión material -->
  <g transform="translate(510, 385)">
    <rect x="0" y="0" width="450" height="120" rx="8" fill="#E8F5E9" stroke="#4CAF50" stroke-width="1.5" filter="url(#shadow)"/>
    <rect x="0" y="0" width="450" height="28" rx="8" fill="#4CAF50"/>
    <rect x="0" y="16" width="450" height="12" fill="#4CAF50"/>
    <text x="225" y="20" font-family="Segoe UI, Arial" font-size="12" font-weight="bold" fill="white" text-anchor="middle">
      SELECCIÓN DE MATERIAL Y REFRIGERACIÓN
    </text>
    
    <text x="20" y="48" font-family="Segoe UI, Arial" font-size="10" fill="#333">
      <tspan font-weight="bold">Material:</tspan> PETG (Tg = 80-85°C)
    </text>
    <text x="250" y="48" font-family="Segoe UI, Arial" font-size="10" fill="#2E7D32">✓ Supera Tmax interna de 58°C</text>
    
    <text x="20" y="68" font-family="Segoe UI, Arial" font-size="10" fill="#333">
      <tspan font-weight="bold">Refrigeración:</tspan> Ventilación pasiva
    </text>
    <text x="250" y="68" font-family="Segoe UI, Arial" font-size="10" fill="#2E7D32">✓ Sin ventiladores (silencioso)</text>
    
    <text x="20" y="88" font-family="Segoe UI, Arial" font-size="10" fill="#333">
      <tspan font-weight="bold">Rejillas:</tspan> Orificios sobre XL6009 y AMS1117
    </text>
    <text x="250" y="88" font-family="Segoe UI, Arial" font-size="10" fill="#2E7D32">✓ Convección natural optimizada</text>
    
    <text x="20" y="108" font-family="Segoe UI, Arial" font-size="10" fill="#333">
      <tspan font-weight="bold">Fabricación:</tspan> Impresión 3D FDM
    </text>
    <text x="250" y="108" font-family="Segoe UI, Arial" font-size="10" fill="#2E7D32">✓ Bajo costo, iteración rápida</text>
  </g>
  
  <!-- Componentes críticos -->
  <g transform="translate(40, 525)">
    <rect x="0" y="0" width="920" height="105" rx="8" fill="white" stroke="#555" stroke-width="1.2" filter="url(#shadow)"/>
    <rect x="0" y="0" width="920" height="28" rx="8" fill="#555"/>
    <rect x="0" y="16" width="920" height="12" fill="#555"/>
    <text x="460" y="20" font-family="Segoe UI, Arial" font-size="12" font-weight="bold" fill="white" text-anchor="middle">
      COMPONENTES CRÍTICOS (90% DE LA CARGA TÉRMICA)
    </text>
    
    <!-- Nextion -->
    <g transform="translate(30, 45)">
      <rect x="0" y="0" width="270" height="50" rx="6" fill="#FFEBEE" stroke="#e53935" stroke-width="1"/>
      <rect x="0" y="0" width="6" height="50" rx="3" fill="#e53935"/>
      <text x="20" y="18" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#c62828">Nextion NX8048T070 (57%)</text>
      <text x="20" y="35" font-family="Segoe UI, Arial" font-size="9" fill="#555">Backlight LED + controlador gráfico</text>
      <text x="20" y="48" font-family="Segoe UI, Arial" font-size="9" fill="#2E7D32">→ Posición frontal, disipación por pantalla</text>
    </g>
    
    <!-- XL6009 -->
    <g transform="translate(320, 45)">
      <rect x="0" y="0" width="270" height="50" rx="6" fill="#FFF3E0" stroke="#FF9800" stroke-width="1"/>
      <rect x="0" y="0" width="6" height="50" rx="3" fill="#FF9800"/>
      <text x="20" y="18" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#E65100">XL6009 Boost (19%)</text>
      <text x="20" y="35" font-family="Segoe UI, Arial" font-size="9" fill="#555">Pérdidas de conmutación (η=85%)</text>
      <text x="20" y="48" font-family="Segoe UI, Arial" font-size="9" fill="#2E7D32">→ Ubicado bajo rejilla de ventilación</text>
    </g>
    
    <!-- ESP32 -->
    <g transform="translate(610, 45)">
      <rect x="0" y="0" width="270" height="50" rx="6" fill="#E3F2FD" stroke="#2196F3" stroke-width="1"/>
      <rect x="0" y="0" width="6" height="50" rx="3" fill="#2196F3"/>
      <text x="20" y="18" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#1565C0">ESP32-WROOM-32 (14%)</text>
      <text x="20" y="35" font-family="Segoe UI, Arial" font-size="9" fill="#555">WiFi activo + procesamiento dual-core</text>
      <text x="20" y="48" font-family="Segoe UI, Arial" font-size="9" fill="#2E7D32">→ Elevado 4mm para flujo de aire</text>
    </g>
  </g>
</svg>

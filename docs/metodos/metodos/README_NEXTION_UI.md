# ğŸ“± Interfaz Nextion - BioSimulator Pro v1.0.0

## DocumentaciÃ³n de la Interfaz de Usuario y ComunicaciÃ³n ESP32-Nextion
*Ãšltima actualizaciÃ³n: 18.12.2025*
*Estado: âœ… Validado y funcionando*

---

## ğŸ“‹ Ãndice

1. [Resumen del Sistema](#resumen-del-sistema)
2. [Flujo de Pantallas](#flujo-de-pantallas)
3. [Tabla de Variables Nextion](#tabla-de-variables-nextion)
4. [Protocolo de ComunicaciÃ³n](#protocolo-de-comunicaciÃ³n)
5. [Reglas de ImplementaciÃ³n](#reglas-de-implementaciÃ³n)

---

## ğŸ¯ Resumen del Sistema

El sistema utiliza una pantalla **Nextion NX8048T070** (800Ã—480 pÃ­xeles, 7 pulgadas) como interfaz de usuario. La comunicaciÃ³n es bidireccional vÃ­a UART a 115200 baudios.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARQUITECTURA GENERAL                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         UART 115200          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚              â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                  â”‚    â”‚
â”‚   â”‚   NEXTION    â”‚    TX/RX (GPIO 16/17)        â”‚     ESP32        â”‚    â”‚
â”‚   â”‚ NX8048T070   â”‚                              â”‚   WROOM-32       â”‚    â”‚
â”‚   â”‚  800 x 480   â”‚                              â”‚                  â”‚    â”‚
â”‚   â”‚  7" Touch    â”‚                              â”‚                  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                                              â”‚                â”‚
â”‚         â”‚ Muestra                                      â”‚ Genera         â”‚
â”‚         â–¼                                              â–¼                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Waveforms   â”‚                              â”‚  SeÃ±ales ECG     â”‚    â”‚
â”‚   â”‚  700Ã—380 px  â”‚                              â”‚  EMG, PPG        â”‚    â”‚
â”‚   â”‚  MÃ©tricas    â”‚                              â”‚  DAC Output      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Arquitectura de ComunicaciÃ³n

### Flujo Bidireccional

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMUNICACIÃ“N BIDIRECCIONAL                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   NEXTION   â”‚                              â”‚       ESP32         â”‚   â”‚
â”‚  â”‚   Display   â”‚                              â”‚                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                â”‚              â”‚
â”‚         â”‚  â•â•â•â•â•â•â•â•â•â• EVENTOS (Touch) â•â•â•â•â•â•â•â•â•â•â•â–º       â”‚              â”‚
â”‚         â”‚  0x65 [page] [id] [event] 0xFF 0xFF 0xFF       â”‚              â”‚
â”‚         â”‚                                                â”‚              â”‚
â”‚         â”‚  Ejemplo: Usuario toca "Play"                  â”‚              â”‚
â”‚         â”‚  0x65 05 04 01 FF FF FF                        â”‚              â”‚
â”‚         â”‚  (page=5, id=4, release)                       â”‚              â”‚
â”‚         â”‚                                                â”‚              â”‚
â”‚         â”‚  â—„â•â•â•â•â•â•â•â•â•â• COMANDOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•          â”‚              â”‚
â”‚         â”‚  "add 1,0,150" + 0xFF 0xFF 0xFF                â”‚              â”‚
â”‚         â”‚                                                â”‚              â”‚
â”‚         â”‚  Ejemplo: Enviar punto al waveform             â”‚              â”‚
â”‚         â”‚  add 1,0,150 â†’ dibuja punto Y=150              â”‚              â”‚
â”‚         â”‚                                                â”‚              â”‚
â”‚         â–¼                                                â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Dibuja punto â”‚                              â”‚ Genera seÃ±al ECG    â”‚  â”‚
â”‚  â”‚ en waveform  â”‚                              â”‚ Escala a 0-211      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚ EnvÃ­a cada 10ms     â”‚  â”‚
â”‚                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ºï¸ Mapa de PÃ¡ginas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MAPA DE NAVEGACIÃ“N                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                         â”‚   PORTADA   â”‚                                  â”‚
â”‚                         â”‚   Page 0    â”‚                                  â”‚
â”‚                         â”‚  (Splash)   â”‚                                  â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                â”‚ bt_comenzar (page menu)                 â”‚
â”‚                                â–¼                                         â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                         â”‚    MENU     â”‚                                  â”‚
â”‚                         â”‚   Page 1    â”‚                                  â”‚
â”‚                         â”‚ ECG EMG PPG â”‚ â—„â”€â”€â”€ bt_atras (desde *_SIM)     â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚              bt_ecg/emg/ppg (sel_signal.val) + bt_ir                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚           â”‚           â”‚                             â”‚
â”‚                    â–¼           â–¼           â–¼                             â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚             â”‚ ECG_SIM  â”‚ â”‚ EMG_SIM  â”‚ â”‚ PPG_SIM  â”‚                       â”‚
â”‚             â”‚  Page 2  â”‚ â”‚  Page 3  â”‚ â”‚  Page 4  â”‚                       â”‚
â”‚             â”‚9 condic. â”‚ â”‚10 condic.â”‚ â”‚7 condic. â”‚                       â”‚
â”‚             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚              bt_ir (printh if sel_*.val>=0)                              â”‚
â”‚                  â”‚            â”‚            â”‚                             â”‚
â”‚                  â–¼            â–¼            â–¼                             â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚             â”‚ WAVEFORM â”‚ â”‚ WAVEFORM â”‚ â”‚ WAVEFORM â”‚                       â”‚
â”‚             â”‚   ECG    â”‚ â”‚   EMG    â”‚ â”‚   PPG    â”‚                       â”‚
â”‚             â”‚  Page 5  â”‚ â”‚  Page 8  â”‚ â”‚  Page 11 â”‚                       â”‚
â”‚             â”‚+Controls â”‚ â”‚+Controls â”‚ â”‚+Controls â”‚                       â”‚
â”‚             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                  â”‚            â”‚            â”‚                             â”‚
â”‚              â”Œâ”€â”€â”€â”´â”€â”€â”€â”    â”Œâ”€â”€â”€â”´â”€â”€â”€â”    â”Œâ”€â”€â”€â”´â”€â”€â”€â”                         â”‚
â”‚              â–¼       â–¼    â–¼       â–¼    â–¼       â–¼                         â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”             â”‚
â”‚          â”‚VALORESâ”‚ â”‚PARAâ”‚ â”‚VALORESâ”‚ â”‚PARAâ”‚ â”‚VALORESâ”‚ â”‚PARAâ”‚             â”‚
â”‚          â”‚ Page6 â”‚ â”‚ 7  â”‚ â”‚ Page9 â”‚ â”‚ 10 â”‚ â”‚Page 12â”‚ â”‚ 13 â”‚             â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”€ Diagrama de Flujo de Usuario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUJO DE EXPERIENCIA DE USUARIO                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                             â”‚
â”‚  â”‚ INICIO  â”‚                                                             â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                             â”‚
â”‚       â”‚                                                                  â”‚
â”‚       â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ PORTADA (Page 0)    â”‚                                                 â”‚
â”‚  â”‚ "BioSimulator Pro"  â”‚                                                 â”‚
â”‚  â”‚ [Comenzar]          â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚             â”‚ Touch: page menu                                           â”‚
â”‚             â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ MENU (Page 1)       â”‚ â—„â”€â”€â”€â”€ bt_atras (page menu)                     â”‚
â”‚  â”‚ [ECG] [EMG] [PPG]   â”‚                                                 â”‚
â”‚  â”‚ [AtrÃ¡s] [Ir]        â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚             â”‚ 1. Selecciona seÃ±al (sel_signal.val=1/2/3)                 â”‚
â”‚             â”‚ 2. Toca [Ir] â†’ if(sel_signal.val) page *_sim               â”‚
â”‚             â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ *_SIM (Page 2/3/4)  â”‚                                                 â”‚
â”‚  â”‚ Lista condiciones   â”‚                                                 â”‚
â”‚  â”‚ [Normal] [Taqui]... â”‚                                                 â”‚
â”‚  â”‚ [AtrÃ¡s] [Ir]        â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚       â–¼           â–¼                                                      â”‚
â”‚  [AtrÃ¡s]    1. Toca condiciÃ³n (sel_*.val=0-9)                           â”‚
â”‚  page menu  2. Toca [Ir] â†’ if(sel_*.val>=0) printh 65...                â”‚
â”‚             3. ESP32 recibe â†’ page waveform_*                            â”‚
â”‚                    â”‚                                                     â”‚
â”‚                    â–¼                                                     â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â”‚ WAVEFORM_* (5/8/11)     â”‚                                        â”‚
â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                        â”‚
â”‚       â”‚ â”‚   ~~~~/\~~~~        â”‚ â”‚                                        â”‚
â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                        â”‚
â”‚       â”‚ [â–¶Play][â¸Pause][â¹Stop] â”‚                                        â”‚
â”‚       â”‚ [Valores] [ParÃ¡metros]  â”‚                                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚            â–¼             â–¼          â–¼                                    â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚       â”‚ "Stop" â”‚   â”‚"Valores"â”‚ â”‚"ParÃ¡metr"â”‚                             â”‚
â”‚       â”‚printh  â”‚   â”‚printh   â”‚ â”‚ printh   â”‚                             â”‚
â”‚       â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚           â”‚             â”‚           â”‚                                    â”‚
â”‚           â–¼             â–¼           â–¼                                    â”‚
â”‚      page menu    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                   â”‚ VALORES â”‚ â”‚PARÃMETROSâ”‚                              â”‚
â”‚                   â”‚ (6/9/12)â”‚ â”‚ (7/10/13)â”‚                              â”‚
â”‚                   â”‚ HR: 72  â”‚ â”‚ Sliders: â”‚                              â”‚
â”‚                   â”‚ RR: 833 â”‚ â”‚  HR â”€â”€â”€  â”‚                              â”‚
â”‚                   â”‚ [Cerrar]â”‚ â”‚  Amp â”€â”€â”€ â”‚                              â”‚
â”‚                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ [Reset]  â”‚                              â”‚
â”‚                        â”‚      â”‚ [Aplicar]â”‚                              â”‚
â”‚                        â”‚      â”‚ [Cancel] â”‚                              â”‚
â”‚                        â”‚      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                        â”‚           â”‚                                     â”‚
â”‚                   printh 65...  printh 65...                             â”‚
â”‚                   ESP32 â†’ page waveform_*                                â”‚
â”‚       â”‚         â”‚    â”‚ [Actualizar]    â”‚         â”‚             â”‚        â”‚
â”‚       â”‚         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚             â”‚        â”‚
â”‚       â”‚         â”‚             â”‚ bt_act           â”‚             â”‚        â”‚
â”‚       â”‚         â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚        â”‚
â”‚       â”‚         â”‚                                              â”‚        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“„ Estructura de Cada PÃ¡gina

### Page 0: PORTADA
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚         BioSimulator Pro               â”‚
â”‚              v1.0.0                    â”‚
â”‚                                        â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚          â”‚  COMENZAR    â”‚ ID: 1       â”‚
â”‚          â”‚  (hotspot)   â”‚              â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Page 1: MENU
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† (ID:4)              â†’ (ID:5)        â”‚
â”‚  bt_atras              bt_ir           â”‚
â”‚                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚   ECG   â”‚ â”‚   EMG   â”‚ â”‚   PPG   â”‚  â”‚
â”‚   â”‚  ID: 1  â”‚ â”‚  ID: 2  â”‚ â”‚  ID: 3  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Page 2: ECG_SIM (SelecciÃ³n de CondiciÃ³n ECG)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† (ID:0)              â†’ (ID:1)        â”‚
â”‚  bt_atras              bt_ir           â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Normal    â”‚  â”‚ Taquicardiaâ”‚        â”‚
â”‚  â”‚   ID: 4    â”‚  â”‚   ID: 5    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Bradicardia â”‚  â”‚  Fib.Aur.  â”‚        â”‚
â”‚  â”‚   ID: 6    â”‚  â”‚   ID: 7    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Fib.Vent. â”‚  â”‚ ExtrasÃ­st. â”‚        â”‚
â”‚  â”‚   ID: 8    â”‚  â”‚   ID: 9    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Bloq.Rama  â”‚  â”‚ Elev. ST   â”‚        â”‚
â”‚  â”‚   ID: 10   â”‚  â”‚   ID: 11   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ Depre. ST  â”‚  sel_ecg: ID 3         â”‚
â”‚  â”‚   ID: 12   â”‚  (variable number)     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mapeo de condiciones:
  ID 4  â†’ CondiciÃ³n 0 (Normal)
  ID 5  â†’ CondiciÃ³n 1 (Taquicardia)
  ID 6  â†’ CondiciÃ³n 2 (Bradicardia)
  ID 7  â†’ CondiciÃ³n 3 (FibrilaciÃ³n Auricular)
  ID 8  â†’ CondiciÃ³n 4 (FibrilaciÃ³n Ventricular)
  ID 9  â†’ CondiciÃ³n 5 (ExtrasÃ­stole/PVC)
  ID 10 â†’ CondiciÃ³n 6 (Bloqueo de Rama)
  ID 11 â†’ CondiciÃ³n 7 (ElevaciÃ³n ST)
  ID 12 â†’ CondiciÃ³n 8 (DepresiÃ³n ST)
```

### Page 3: EMG_SIM (SelecciÃ³n de CondiciÃ³n EMG)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† (ID:12)             â†’ (ID:13)       â”‚
â”‚  bt_atras              bt_ir           â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Reposo    â”‚  â”‚   Temblor  â”‚        â”‚
â”‚  â”‚   ID: 1    â”‚  â”‚   ID: 6    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Contr. Leve â”‚  â”‚  MiopatÃ­a  â”‚        â”‚
â”‚  â”‚   ID: 2    â”‚  â”‚   ID: 7    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Contr.Moder.â”‚  â”‚ NeuropatÃ­a â”‚        â”‚
â”‚  â”‚   ID: 3    â”‚  â”‚   ID: 8    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Contr.Fuerteâ”‚  â”‚Fasciculac. â”‚        â”‚
â”‚  â”‚   ID: 4    â”‚  â”‚   ID: 9    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Contr.MÃ¡ximaâ”‚  â”‚   Fatiga   â”‚        â”‚
â”‚  â”‚   ID: 5    â”‚  â”‚   ID: 10   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                        â”‚
â”‚               sel_emg: ID 11           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mapeo de condiciones:
  ID 1  â†’ CondiciÃ³n 0 (Reposo)
  ID 2  â†’ CondiciÃ³n 1 (ContracciÃ³n Leve)
  ID 3  â†’ CondiciÃ³n 2 (ContracciÃ³n Moderada)
  ID 4  â†’ CondiciÃ³n 3 (ContracciÃ³n Fuerte)
  ID 5  â†’ CondiciÃ³n 4 (ContracciÃ³n MÃ¡xima)
  ID 6  â†’ CondiciÃ³n 5 (Temblor)
  ID 7  â†’ CondiciÃ³n 6 (MiopatÃ­a)
  ID 8  â†’ CondiciÃ³n 7 (NeuropatÃ­a)
  ID 9  â†’ CondiciÃ³n 8 (FasciculaciÃ³n)
  ID 10 â†’ CondiciÃ³n 9 (Fatiga)
```

### Page 4: PPG_SIM (SelecciÃ³n de CondiciÃ³n PPG)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† (ID:9)              â†’ (ID:10)       â”‚
â”‚  bt_atras              bt_ir           â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Normal  â”‚ â”‚ Arritmia â”‚ â”‚Perf.DÃ©bilâ”‚â”‚
â”‚  â”‚  ID: 1   â”‚ â”‚  ID: 3   â”‚ â”‚  ID: 4   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚Perf.DÃ©bilâ”‚ â”‚Perf.Fuertâ”‚ â”‚Vasoconst.â”‚â”‚
â”‚  â”‚  ID: 5   â”‚ â”‚  ID: 6   â”‚ â”‚  ID: 7   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚        â”‚Ruido Movim.  â”‚                â”‚
â”‚        â”‚    ID: 8     â”‚                â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚               sel_ppg: ID 2            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mapeo de condiciones:
  ID 1 â†’ CondiciÃ³n 0 (Normal)
  ID 3 â†’ CondiciÃ³n 1 (Arritmia)
  ID 4 â†’ CondiciÃ³n 2 (PerfusiÃ³n DÃ©bil)
  ID 5 â†’ CondiciÃ³n 3 (PerfusiÃ³n DÃ©bil)
  ID 6 â†’ CondiciÃ³n 4 (PerfusiÃ³n Fuerte)
  ID 7 â†’ CondiciÃ³n 5 (VasoconstricciÃ³n)
  ID 8 â†’ CondiciÃ³n 6 (Ruido por Movimiento)
```

### Pages 5, 6, 7: WAVEFORM (ECG_WAVE, EMG_WAVE, PPG_WAVE)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚           WAVEFORM                 â”‚ â”‚
â”‚ â”‚         399 x 211 px               â”‚ â”‚
â”‚ â”‚            ID: 1                   â”‚ â”‚
â”‚ â”‚      ~~~~~/\~~~~~~/\~~~~~          â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Valores â”‚        â”‚   ParÃ¡metros    â”‚ â”‚
â”‚ â”‚  ID: 2  â”‚        â”‚      ID: 3      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚    â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â”             â”‚
â”‚    â”‚ â–¶ â”‚    â”‚ â¸ â”‚    â”‚ â¹ â”‚             â”‚
â”‚    â”‚ID4â”‚    â”‚ID5â”‚    â”‚ID6â”‚             â”‚
â”‚    â””â”€â”€â”€â”˜    â””â”€â”€â”€â”˜    â””â”€â”€â”€â”˜             â”‚
â”‚    Play     Pause    Stop              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Componentes:
  ID 1: Waveform (ecg/emg/ppg)
  ID 2: v_actual (hotspot) â†’ popup valores
  ID 3: parametros (hotspot) â†’ popup params
  ID 4: play (hotspot) â†’ iniciar seÃ±al
  ID 5: pause (hotspot) â†’ pausar seÃ±al
  ID 6: stop (hotspot) â†’ detener y volver a menÃº
```

### Page 8: POPUP VALORES ECG
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ p0 (picture - fondo popup)       â”‚  â”‚
â”‚  â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                       â”‚bt_act  â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚ ID: 1  â”‚ â”‚  â”‚
â”‚  â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚   HR:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚        â”‚ val_hr  â”‚ ID: 2 number  â”‚  â”‚
â”‚  â”‚        â”‚   72    â”‚               â”‚  â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚   RR:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚        â”‚ val_rr  â”‚ ID: 3 number  â”‚  â”‚
â”‚  â”‚        â”‚  833    â”‚               â”‚  â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚   QRS: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚        â”‚ val_qrs â”‚ ID: 4 xfloat  â”‚  â”‚
â”‚  â”‚        â”‚  1.2    â”‚ (vvs0=1)      â”‚  â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚   ST:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚        â”‚ val_st  â”‚ ID: 5 xfloat  â”‚  â”‚
â”‚  â”‚        â”‚  0.0    â”‚ (vvs0=1)      â”‚  â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¡ Protocolo de ComunicaciÃ³n

### Formato de Eventos Nextion â†’ ESP32

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FORMATO DE EVENTO TOUCH                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Byte 0    Byte 1    Byte 2    Byte 3    Byte 4-6                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  0x65  â”‚  Page   â”‚Component â”‚  Event  â”‚ 0xFF FF FF  â”‚                â”‚
â”‚  â”‚ (tipo) â”‚   ID    â”‚    ID    â”‚ (1=rel) â”‚ (terminador)â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                          â”‚
â”‚   Ejemplo: Usuario toca "Play" en ecg_wave                              â”‚
â”‚                                                                          â”‚
â”‚   0x65     0x05      0x04       0x01      0xFF 0xFF 0xFF                â”‚
â”‚   â”‚        â”‚         â”‚          â”‚                                        â”‚
â”‚   â”‚        â”‚         â”‚          â””â”€â”€ Release event                        â”‚
â”‚   â”‚        â”‚         â””â”€â”€ Component ID = 4 (play)                         â”‚
â”‚   â”‚        â””â”€â”€ Page ID = 5 (ecg_wave)                                    â”‚
â”‚   â””â”€â”€ Touch event code                                                   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Formato de Comandos ESP32 â†’ Nextion

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMANDOS PRINCIPALES                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   NAVEGACIÃ“N:                                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚   â”‚  page <n>               Ir a pÃ¡gina n   â”‚                           â”‚
â”‚   â”‚  Ejemplo: "page 5" + 0xFF 0xFF 0xFF     â”‚                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                          â”‚
â”‚   WAVEFORM:                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚   â”‚  add <id>,<ch>,<val>    Agregar punto   â”‚                           â”‚
â”‚   â”‚  Ejemplo: "add 1,0,150" + 0xFF 0xFF 0xFFâ”‚                           â”‚
â”‚   â”‚                                         â”‚                           â”‚
â”‚   â”‚  cle <id>,<ch>          Limpiar canal   â”‚                           â”‚
â”‚   â”‚  Ejemplo: "cle 1,0" + 0xFF 0xFF 0xFF    â”‚                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                          â”‚
â”‚   ACTUALIZAR VALORES:                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚   â”‚  <comp>.val=<n>         NÃºmero entero   â”‚                           â”‚
â”‚   â”‚  Ejemplo: "val_hr.val=72"               â”‚                           â”‚
â”‚   â”‚                                         â”‚                           â”‚
â”‚   â”‚  <comp>.txt="<s>"       Texto           â”‚                           â”‚
â”‚   â”‚  Ejemplo: "val_qrs.txt=\"1.2\""         â”‚                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Comandos y Eventos

### Tabla de Eventos UI

| PÃ¡gina | ID | Componente | UIEvent | AcciÃ³n ESP32 |
|--------|-----|------------|---------|--------------|
| 0 | 1 | bt_comenzar | BUTTON_COMENZAR | â†’ Ir a MENU |
| 1 | 1 | bt_ecg | BUTTON_ECG | Seleccionar ECG |
| 1 | 2 | bt_emg | BUTTON_EMG | Seleccionar EMG |
| 1 | 3 | bt_ppg | BUTTON_PPG | Seleccionar PPG |
| 1 | 5 | bt_ir | BUTTON_IR | â†’ Ir a *_SIM |
| 2 | 4-12 | bt_* | BUTTON_CONDITION | Seleccionar condiciÃ³n ECG |
| 2 | 1 | bt_ir | BUTTON_IR | â†’ Ir a ECG_WAVE |
| 5,6,7 | 4 | play | BUTTON_START | Iniciar seÃ±al |
| 5,6,7 | 5 | pause | BUTTON_PAUSE | Pausar seÃ±al |
| 5,6,7 | 6 | stop | BUTTON_STOP | Detener â†’ MenÃº |
| 5,6,7 | 2 | v_actual | BUTTON_VALORES | Mostrar popup |

### Frecuencias de ActualizaciÃ³n

| Tarea | Frecuencia | Intervalo |
|-------|------------|-----------|
| Waveform | 100 Hz | 10 ms |
| MÃ©tricas | 4 Hz | 250 ms |
| UI General | 10 Hz | 100 ms |

---

## ğŸ”§ ConfiguraciÃ³n del Waveform

### Atributos Nextion Editor

| Atributo | Valor | DescripciÃ³n |
|----------|-------|-------------|
| `w` | 399 | Ancho en pÃ­xeles |
| `h` | 211 | Alto en pÃ­xeles |
| `ch` | 1 | NÃºmero de canales |
| `bco` | 0 | Color fondo (negro) |
| `gdc` | 1024 | Color cuadrÃ­cula (verde oscuro) |
| `gdw` | 40 | Ancho cuadrÃ­cula |
| `gdh` | 35 | Alto cuadrÃ­cula |
| `pco0` | 2016 | Color seÃ±al (verde brillante) |
| `dis` | 10 | Distancia scroll |

### Escalado de SeÃ±al

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESCALADO DE SEÃ‘AL                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   SeÃ±al ECG (modelo)           DAC (ESP32)            Nextion            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚   -1.5 mV a +2.5 mV    â†’      0 a 255         â†’      10 a 201            â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                 â”‚   â”‚
â”‚   â”‚   valorDAC = (seÃ±alMV + 1.5) * (255 / 4.0)                      â”‚   â”‚
â”‚   â”‚                                                                 â”‚   â”‚
â”‚   â”‚   valorDisplay = map(valorDAC, 0, 255, 10, WAVEFORM_HEIGHT-10)  â”‚   â”‚
â”‚   â”‚                                                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚   El margen de 10px evita que la seÃ±al toque los bordes                 â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ REGLAS CRÃTICAS DE IMPLEMENTACIÃ“N

### ğŸ”´ NUNCA mezclar `page` + `printh` en el mismo Touch Release Event

```
âŒ INCORRECTO (causa doble navegaciÃ³n):
Touch Release Event del bt_ir:
if(sel_ecg.val>=0)
{
  printh 65 02 02 01 FF FF FF
  page waveform_ecg              // âš ï¸ CONFLICTO!
}

âœ… CORRECTO:
Touch Release Event del bt_ir:
if(sel_ecg.val>=0)
{
  printh 65 02 02 01 FF FF FF    // ESP32 maneja la navegaciÃ³n
}
```

### ğŸ“‹ DivisiÃ³n de responsabilidades

| PÃ¡ginas | NavegaciÃ³n | Touch Release Events |
|---------|-----------|---------------------|
| **0-4** (PORTADA, MENU, *_SIM) | **Nextion controla** | Solo `page X` y asignaciones `sel_*.val` |
| **5-13** (WAVEFORM, VALORES, PARAMETROS) | **ESP32 controla** | Solo `printh 65...` |

### ğŸ¯ LÃ³gica especÃ­fica por pÃ¡gina

**PÃGINA 0 - PORTADA:**
- bt_comenzar â†’ `page menu`

**PÃGINA 1 - MENU:**
- bt_ecg â†’ `sel_signal.val=1; bt_ecg.val=1; bt_emg.val=0; bt_ppg.val=0`
- bt_emg â†’ `sel_signal.val=2; bt_ecg.val=0; bt_emg.val=1; bt_ppg.val=0`
- bt_ppg â†’ `sel_signal.val=3; bt_ecg.val=0; bt_emg.val=0; bt_ppg.val=1`
- bt_atras â†’ `page portada`
- bt_ir â†’ `if(sel_signal.val==1){page ecg_sim} if(sel_signal.val==2){page emg_sim} if(sel_signal.val==3){page ppg_sim}`

**PÃGINAS 2, 3, 4 - *_SIM (SelecciÃ³n de CondiciÃ³n):**
- **Botones condiciÃ³n (dual-state)**: Solo `sel_*.val=X` y `printh 65 0X 0X 01 FF FF FF` (SIN page, SIN lÃ³gica extra)
  - ECG (pÃ¡gina 2): **bt_norm** (ID 4), bt_taq (5), bt_bra (6), bt_fa (7), bt_fv (8), bt_pvc (9), bt_brb (10), bt_stup (11), bt_stdn (12)
  - EMG (pÃ¡gina 3): bt_reposo (1), bt_leve (2), bt_moderada (3), bt_fuerte (4), bt_maxima (5), bt_temblor (6), bt_miopatia (7), bt_neuropatia (8), bt_fasc (9), bt_fatiga (10)
  - PPG (pÃ¡gina 4): **bt_norm** (1), bt_arr (2), bt_lowp (3), bt_vasod (4), bt_highp (5), bt_vasc (6)
- **bt_atras** â†’ `page menu`
- **bt_ir** â†’ `if(sel_*.val>=0){printh 65 0X 0X 01 FF FF FF}` (ESP32 decide pÃ¡gina destino)
- **âœ… SelecciÃ³n Ãºnica validada**: ESP32 limpia todos los botones por ID (b1..bX) y por nombre (bt_*) antes de marcar el seleccionado.
  - **Importante**: Los botones "Normal" se llaman `bt_norm` (no `bt_nom`).
  - Orden de limpieza: primero IDs genÃ©ricos, luego nombres especÃ­ficos para evitar conflictos entre pÃ¡ginas.

**PÃGINAS 5, 8, 11 - WAVEFORM_*:**
- Todos los botones â†’ `printh 65 0X 0X 01 FF FF FF`
- ESP32 maneja toda la lÃ³gica de navegaciÃ³n

**PÃGINAS 6, 7, 9, 10, 12, 13 - POPUPS:**
- Todos los botones/sliders â†’ `printh 65 0X 0X 01 FF FF FF`
- xfloat displays en PARAMETROS â†’ `n_*.val=h_*.val` (actualizaciÃ³n local)
- ESP32 cierra popups con `goToPage(NextionPage::WAVEFORM_*)`

### ğŸ”§ Tipo de componente vs CÃ³digo ESP32

**El tipo de componente Nextion (button/hotspot/dual-state) NO afecta el cÃ³digo ESP32:**

```cpp
// ESP32 solo ve el ID, no el tipo:
case 2:  // bt_act (puede ser button, hotspot, dual-state)
    uiEvent = UIEvent::BUTTON_BACK_POPUP;
    break;
```

**Lo que importa:**
- âœ… ID correcto del componente
- âœ… Touch Release Event correcto
- âœ… Nombres exactos de componentes (ej: `bt_norm` no `bt_nom`)
- âŒ El tipo visual (button/hotspot/dual-state) es irrelevante para ESP32

---

## ğŸ”§ Troubleshooting: Botones que no se deseleccionan

**SÃ­ntoma:** Un botÃ³n dual-state queda "pegado" aunque se presionen otros.

**Causas comunes:**
1. **Nombre incorrecto en cÃ³digo**: Verificar que `bt_norm` coincida exactamente con el `objname` en Nextion.
2. **IDs duplicados**: Asegurar que cada botÃ³n tenga un ID Ãºnico dentro de su pÃ¡gina.
3. **Touch Release con lÃ³gica extra**: Los botones de condiciÃ³n solo deben tener `sel_*.val=X` y `printh`, NO `page` ni comandos adicionales.
4. **Comandos `pic/pic2` innecesarios**: Para dual-state, `val=0/1` es suficiente; agregar `pic=0/pic2=0` puede causar loops de re-dibujado.

**SoluciÃ³n validada:**
- ESP32 limpia primero por IDs genÃ©ricos (`b1.val=0`, `b2.val=0`...), luego por nombres (`bt_norm.val=0`, `bt_arr.val=0`...).
- Esto evita conflictos si componentes en pÃ¡ginas diferentes comparten nombres similares.

---

## ğŸ“š Referencias

- **Nextion Instruction Set**: https://nextion.tech/instruction-set/
- **ESP32 DAC**: ResoluciÃ³n 8-bit (0-255), salida 0-3.3V
- **UART**: 115200 baudios, 8N1

---

*DocumentaciÃ³n BioSimulator Pro v1.0.0*
*Ãšltima actualizaciÃ³n: Diciembre 2025*

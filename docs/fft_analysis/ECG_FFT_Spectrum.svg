<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <linearGradient id="ecgGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:0.8"/>
      <stop offset="100%" style="stop-color:#e74c3c;stop-opacity:0.1"/>
    </linearGradient>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="500" fill="#fafafa"/>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">
    Análisis Espectral FFT - Señal ECG (McSharry ECGSYN)
  </text>
  <text x="400" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">
    Frecuencia de muestreo: 300 Hz | Ventana: Hanning | N = 4096
  </text>
  
  <!-- Grid area -->
  <rect x="100" y="80" width="600" height="320" fill="white" stroke="#bdc3c7" stroke-width="1"/>
  
  <!-- Grid lines -->
  <g stroke="#ecf0f1" stroke-width="1">
    <!-- Horizontal -->
    <line x1="100" y1="160" x2="700" y2="160"/>
    <line x1="100" y1="240" x2="700" y2="240"/>
    <line x1="100" y1="320" x2="700" y2="320"/>
    <!-- Vertical -->
    <line x1="220" y1="80" x2="220" y2="400"/>
    <line x1="340" y1="80" x2="340" y2="400"/>
    <line x1="460" y1="80" x2="460" y2="400"/>
    <line x1="580" y1="80" x2="580" y2="400"/>
  </g>
  
  <!-- Spectrum fill -->
  <path d="M100,400 
           L100,380 L110,370 L120,340 L130,280 L140,220 L150,160 L160,120 L170,100 L180,95
           L190,100 L200,110 L210,130 L220,160 L230,190 L240,220 L250,250 L260,275 L270,295
           L280,310 L290,320 L300,330 L310,338 L320,345 L330,352 L340,358 L350,363 L360,368
           L370,372 L380,376 L390,379 L400,382 L420,386 L450,390 L500,394 L550,396 L600,398
           L650,399 L700,400 Z" 
        fill="url(#ecgGradient)"/>
  
  <!-- Spectrum line -->
  <path d="M100,380 L110,370 L120,340 L130,280 L140,220 L150,160 L160,120 L170,100 L180,95
           L190,100 L200,110 L210,130 L220,160 L230,190 L240,220 L250,250 L260,275 L270,295
           L280,310 L290,320 L300,330 L310,338 L320,345 L330,352 L340,358 L350,363 L360,368
           L370,372 L380,376 L390,379 L400,382 L420,386 L450,390 L500,394 L550,396 L600,398
           L650,399 L700,400" 
        fill="none" stroke="#c0392b" stroke-width="2.5"/>
  
  <!-- Peak marker -->
  <circle cx="180" cy="95" r="6" fill="#e74c3c" stroke="white" stroke-width="2"/>
  <line x1="180" y1="95" x2="180" y2="400" stroke="#e74c3c" stroke-width="1" stroke-dasharray="5,5"/>
  
  <!-- F99 marker -->
  <line x1="280" y1="80" x2="280" y2="400" stroke="#27ae60" stroke-width="2" stroke-dasharray="8,4"/>
  <text x="285" y="95" font-family="Arial, sans-serif" font-size="11" fill="#27ae60" font-weight="bold">F99% = 21.6 Hz</text>
  
  <!-- Bandwidth annotation -->
  <line x1="100" y1="190" x2="360" y2="190" stroke="#3498db" stroke-width="1.5"/>
  <line x1="100" y1="185" x2="100" y2="195" stroke="#3498db" stroke-width="1.5"/>
  <line x1="360" y1="185" x2="360" y2="195" stroke="#3498db" stroke-width="1.5"/>
  <text x="230" y="183" font-family="Arial, sans-serif" font-size="10" fill="#3498db" text-anchor="middle">BW -20dB = 35 Hz</text>
  
  <!-- Axis labels -->
  <text x="400" y="435" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#2c3e50">Frecuencia (Hz)</text>
  <text x="40" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#2c3e50" transform="rotate(-90, 40, 240)">Magnitud (dB)</text>
  
  <!-- X axis ticks -->
  <text x="100" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">0</text>
  <text x="180" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#e74c3c" font-weight="bold">1.2</text>
  <text x="220" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">10</text>
  <text x="340" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">30</text>
  <text x="460" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">60</text>
  <text x="580" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">100</text>
  <text x="700" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">150</text>
  
  <!-- Y axis ticks -->
  <text x="90" y="405" text-anchor="end" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">-60</text>
  <text x="90" y="325" text-anchor="end" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">-40</text>
  <text x="90" y="245" text-anchor="end" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">-20</text>
  <text x="90" y="165" text-anchor="end" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">-10</text>
  <text x="90" y="85" text-anchor="end" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">0</text>
  
  <!-- Legend box -->
  <rect x="520" y="100" width="170" height="110" fill="white" stroke="#bdc3c7" rx="5"/>
  <text x="530" y="120" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">Resultados FFT</text>
  
  <circle cx="540" cy="140" r="5" fill="#e74c3c"/>
  <text x="550" y="144" font-family="Arial, sans-serif" font-size="11" fill="#34495e">Pico fundamental: 1.2 Hz</text>
  
  <line x1="530" y1="160" x2="550" y2="160" stroke="#27ae60" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="555" y="164" font-family="Arial, sans-serif" font-size="11" fill="#34495e">F99% energía: 21.6 Hz</text>
  
  <line x1="530" y1="180" x2="550" y2="180" stroke="#3498db" stroke-width="2"/>
  <text x="555" y="184" font-family="Arial, sans-serif" font-size="11" fill="#34495e">BW -20dB: 35 Hz</text>
  
  <text x="530" y="202" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">Fs modelo: 300 Hz ✓</text>
  
  <!-- Footer note -->
  <text x="400" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#95a5a6">
    BioSimulator Pro - Validación espectral modelo ECG McSharry | Nyquist: 150 Hz &gt; 21.6 Hz ✓
  </text>
</svg>